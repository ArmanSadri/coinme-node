{"version":3,"sources":["../../../src/js/data/Identity.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;IASM,Q;;;;;;;;AAUF,sBAAY,OAAZ,EAAqB;AAAA;;AACjB,YAAI,gBAAJ;AACA,YAAI,aAAa,EAAjB;;AAEA,YAAI,kBAAQ,QAAR,CAAiB,OAAjB,CAAJ,EAA+B;AAC3B,sBAAU,kBAAQ,IAAR,CAAa,OAAb,EAAsB,SAAtB,CAAV;AACA,yBAAa,kBAAQ,IAAR,CAAa,OAAb,EAAsB,YAAtB,EAAoC,QAApC,CAAb;AACH,SAHD,MAGO;AACH,sBAAU,kBAAQ,0BAAR,CAAmC,OAAnC,EAA4C,UAA5C,CAAV;AACH;;AATgB,iGAWR,SAXQ;;AAajB,cAAK,QAAL,GAAgB,kBAAQ,gBAAR,CAAyB,OAAzB,EAAkC,qBAAlC,CAAhB;AACA,cAAK,WAAL,GAAmB,UAAnB,C;AAdiB;AAepB;;;;;;;;;;mCAmBU;;AAEP,gBAAI,MAAM,KAAK,OAAL,CAAa,GAAb,CAAiB,KAAjB,EAAV;;AAEA,6BAAO,IAAP,CAAY,KAAK,UAAL,IAAmB,EAA/B,EAAmC,UAAS,KAAT,EAAgB,GAAhB,EAAqB;AACpD,sBAAM,IAAI,SAAJ,CAAc,GAAd,EAAmB,KAAnB,CAAN;AACH,aAFD;;AAIA,mBAAO,IAAI,QAAJ,EAAP;AACH;;;iCAEQ;AACL,8FAAoB;AAChB,yBAAS,KAAK,QAAL;AADO,aAApB;AAGH;;;4BA5Ba;AACV,mBAAO,KAAK,QAAZ;AACH;;;;;;;;;;4BAOgB;AACb,mBAAO,KAAK,WAAZ;AACH;;;;;;QAoBG,Q,GAAA,Q;kBACO,Q","file":"Identity.js","sourcesContent":["import CoreObject from \"../CoreObject\";\r\nimport Address from \"../Address\";\r\nimport Utility from \"../Utility\";\r\nimport URI from \"urijs\";\r\nimport Lodash from \"lodash\";\r\n\r\n/**\r\n * This class represents a User pointer.\r\n *\r\n * One user could possibly have more than 1 identity associated with them.\r\n *\r\n * It is best to use a Natural Key for an Identity\r\n */\r\nclass Identity extends CoreObject {\r\n\r\n    _address;\r\n\r\n    _attributes;\r\n\r\n    /**\r\n     *\r\n     * @param {String|URI|{address:Address, attributes?:Object}} options\r\n     */\r\n    constructor(options) {\r\n        let address;\r\n        let attributes = {};\r\n\r\n        if (Utility.isObject(options)) {\r\n            address = Utility.take(options, 'address');\r\n            attributes = Utility.take(options, 'attributes', 'object');\r\n        } else {\r\n            address = Address.toAddressWithDefaultScheme(options, 'identity');\r\n        }\r\n\r\n        super(...arguments);\r\n\r\n        this._address = Address.shouldBeInstance(address, 'address is required');\r\n        this._attributes = attributes; // this is optional\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @return {Address}\r\n     */\r\n    get address() {\r\n        return this._address;\r\n    }\r\n\r\n    /**\r\n     * Optional attributes\r\n     *\r\n     * @return {Object}\r\n     */\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n\r\n    toString() {\r\n        /** @type {URI} */\r\n        var uri = this.address.uri.clone();\r\n\r\n        Lodash.each(this.attributes || {}, function(value, key) {\r\n            uri = uri.addSearch(key, value);\r\n        });\r\n\r\n        return uri.toString();\r\n    }\r\n\r\n    toJson() {\r\n        return super.toJson({\r\n            address: this.toString()\r\n        });\r\n    }\r\n}\r\n\r\nexport {Identity};\r\nexport default Identity;"]}